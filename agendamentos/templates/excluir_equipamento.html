{% load static %}
<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Excluir Equipamento</title>
    <!-- Adicione o link para o seu arquivo CSS aqui -->
    <link rel="stylesheet" href="{% static 'styles.css' %}">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <!-- Adicione o link para o CSS do SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
</head>
<body>
    <div class="container_home">
        <div class="home-form">
            <h1>Excluir Equipamento</h1>
            <p>Selecione o equipamento que deseja excluir:</p>
            <form action="{% url 'excluir_equipamento' %}" method="POST" id="deleteForm">
                {% csrf_token %}
                <select name="equipamento_id">
                    {% for equipamento in equipamentos %}
                        <option value="{{ equipamento.id }}">{{ equipamento.nome }}</option>
                    {% endfor %}
                </select>
                <br>
                <br>
                <!-- Adicione SweetAlert2 ao clicar no botão Excluir -->
                <button type="button" class="btn btn-danger ml-2" onclick="confirmarExclusao()">Excluir</button>
                <br>
                <br>
                
                <a href="{% url 'administrador' %}" class="btn btn-secondary">Voltar</a>
                
            </form>
        </div>
    </div>
    
    <!-- Adicione o script do SweetAlert2 -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.all.min.js"></script>

    <script>
        function confirmarExclusao() {
            var equipamentoSelecionado = document.querySelector('select[name="equipamento_id"]').value;
            var equipamentoNome = document.querySelector('select[name="equipamento_id"] option[value="' + equipamentoSelecionado + '"]').innerText;
    
            // Use SweetAlert2 para confirmar a exclusão
            Swal.fire({
                title: 'Tem certeza?',
                text: "Você deseja excluir o equipamento '" + equipamentoNome + "'?",
                icon: 'warning',
                showCancelButton: true,
                confirmButtonColor: '#3085d6',
                cancelButtonColor: '#d33',
                confirmButtonText: 'Sim, excluir!',
                cancelButtonText: 'Cancelar'
            }).then((result) => {
                if (result.isConfirmed) {
                    // Se confirmado, faça a exclusão aqui
                    document.getElementById('deleteForm').submit(); // Submeta o formulário de exclusão
                    // Exibir mensagem de sucesso após a exclusão
                    Swal.fire(
                        'Excluído!',
                        'O equipamento foi excluído com sucesso.',
                        'success'
                    );
                }
            });
        }
    </script>
</body>
</html>
